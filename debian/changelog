merge-o-matic (2014.01.24.2) unstable; urgency=medium

  * Correct name of jinja.py in Makefile
  * debian/rules: explicitly run "make install", since dh_auto_install
    doesn't seem to do the right thing on our build servers
  * get-version.sh: be compatible with older dpkg-parsechangelog

 -- Simon McVittie <simon.mcvittie@collabora.co.uk>  Tue, 28 Jan 2014 13:04:03 +0000

merge-o-matic (2014.01.24.1) unstable; urgency=medium

  * Don't run "make check" during the build, it still needs a
    configured ~/.oscrc.

 -- Simon McVittie <simon.mcvittie@collabora.co.uk>  Fri, 24 Jan 2014 18:54:44 +0000

merge-o-matic (2014.01.24) unstable; urgency=medium

  * OBSDistro.sync: on failure to update, delete the checkout and start again
    (SIN: #419)
  * Introduce a PoolDirectory object to encapsulate a subdirectory of pool/
  * expire_pool: update Sources file when we delete things (SIN: #430)
  * overhaul tests so they work and are somewhat realistic
  * produce_merges: make less noise about missing bases
  * produce_merges: include MoM version and merge date in all merge reports
  * do most of the old text REPORT via a MergeReport object
  * Don't try to send email for packages with only an old-style REPORT
    (SIN: #439)
  * Write out HTML reports that combine REPORT and action_needed.eml,
    and add packages' changelogs too (SIN: #440)
    - new dependency: python-jinja2
  * merge_report: document merged_patch correctly (diff(theirs..proposed)),
    and generate a patch showing diff(ours..proposed)
  * Check for base versions in pool directories, not just on upstream servers
    (SIN: #443)
  * Record miscellaneous merge failures in more detail (SIN: #444)
  * produce_merges: don't warn about base versions missing from suites
    (SIN: #445)
  * Don't try to prepend a merge changelog entry if the changelog had
    conflicts and so doesn't exist (SIN: #446)

 -- Simon McVittie <simon.mcvittie@collabora.co.uk>  Fri, 24 Jan 2014 18:39:13 +0000

merge-o-matic (2014.01.16) unstable; urgency=medium

  * Include MoM version in the log and merge reports (SIN: #435)
  * OBSPackage: force obsName to be an 8-bit string,
    fixing failure to commit to OBS (partially fixes SIN: #419)
  * notify_action_needed: describe whether the package was committed
    (SIN: #434)
  * notify_action_needed: give some hints about how to deal with missing bases
    (SIN: #432)
  * OBSDistro: merge sync, update and checkout into one "sync" method

 -- Simon McVittie <simon.mcvittie@collabora.co.uk>  Thu, 16 Jan 2014 19:10:55 +0000

merge-o-matic (2014.01.14.1) unstable; urgency=low

  * Improve logging and error handling
  * Remove more unused functions
  * OBSPackage: get list of files "live" rather than relying on the cache,
    avoiding crash if it's outdated (SIN: #425)
  * model.obs: require Debian source package name = OBS package name,
    again avoiding potential crashes caused by the cache of OBS info
    - don't crash if unable to get list of OBS packages (mitigates SIN: #429)
  * expire_pool: be a bit more object-oriented
  * momsettings: drop unused variable RSS_TIME_FORMAT
  * momlib: get globals from config, not directly from momsettings
  * merge_report: there is no MergeReport.get method, so don't crash
    trying to use it (SIN: #427)
  * update_sources: make debug messages non-misleading
  * Split Package.versions() into currentVersions() and poolVersions(),
    avoiding merge with incorrect version if one target merges from a newer
    upstream version than another (SIN: #426)

 -- Simon McVittie <simon.mcvittie@collabora.co.uk>  Tue, 14 Jan 2014 18:06:08 +0000

merge-o-matic (2014.01.10.1) unstable; urgency=low

  * Read and write merge reports using JSON (SIN: #392)
  * produce_merges: include the merged_patch in SYNC_THEIRS merges
  * notify_action_needed.py: add email notification (SIN: #391)
  * produce_merges: improve logging
  * model.obs: use a less confusing syntax for dict membership
  * Catch HTTP errors when branching/committing packages (mitigates SIN: #419)
  * expire_pool: avoid a somewhat misleading debug message
  * Include logger and severity in log messages
  * produce_merges: look for common ancestor in target, not only sources
    (SIN: #418, #422, #423)
  * Be more careful with findPackage returning a list (SIN: #420)
  * Remove some unused functions

 -- Simon McVittie <simon.mcvittie@collabora.co.uk>  Fri, 10 Jan 2014 17:04:54 +0000

merge-o-matic (2013.12.16.1) unstable; urgency=low

  * merge_status: cope with unknown priorities such as "source" (SIN: #377)
  * merge_status: cope with non-OBSDistro (SIN: #375)
  * OBSDistro: respect config("obs", "project") (SIN: #381)
  * model: add more doc-comments (SIN: #382)
  * main: chdir to the ROOT before we start (SIN: #384)
  * model.base: make sources_urls work as apparently intended (SIN: #385)
  * Distro.findPackage: filter versions correctly (SIN: #383)
  * commit_merges: when updating to an upstream version, use that version
    (SIN: #389)
  * fetchMissingVersion: only fetch what we actually want
  * fetchMissingVersion: cope with PackageNotFound
  * fetchMissingVersion: fix exception in exception handling
  * produce_merges: read changelogs to find the common ancestor (SIN: #29)
  * Allow selection of different upstreams for different packages (SIN: #390)
  * produce_merges: record the base versions we tried in the REPORT
  * expire_pool: read merge reports to determine which base versions to keep
  * generate_patches: fold into produce_merges, and use better base version
  * OBSPackage: fall back to parent distro to get obsName, files
  * momsettings: expand examples and use imaginary derived distributions
    (SIN: #265)
  * merge-o-matic.spec.in: remove
  * syndicate.py: remove
  * Remove query.py
  * debian/preinst: create MoM's home directory (SIN: #374)
  * Use the Singularity mailing list as MoM's maintainer
  * Install a copy of momsettings.py as an example as well as the conffile
  * debian/source/format: be a native package
  * debian/clean: clean *.pyc
  * merge_status: let users configure the URL of the OBS web UI for a distro

 -- Simon McVittie <simon.mcvittie@collabora.co.uk>  Mon, 16 Dec 2013 20:15:52 +0000

merge-o-matic (2013.07.03-0co1) unstable; urgency=low

  [ Héctor Orón Martínez ]
  * Update cron.d file: drop merge-o-matic-run
  * Update momsettings to singularity
  * Release 2013.07.03
  * Update configs for singularity

  [ Andrew Lee (李健秋) ]
  * Release debian version 2013.07.03-0co1.

 -- Andrew Lee (李健秋) <andrew.lee@collabora.co.uk>  Thu, 04 Jul 2013 03:55:10 +0800

merge-o-matic (2013.03.22-0co4) unstable; urgency=low

  * debian/postinst: enable apache2 mom.conf site and set log file 
    permissions. (SIN: #24, #26)

 -- Andrew Lee (李健秋) <andrew.lee@collabora.co.uk>  Mon, 03 Jun 2013 20:49:10 +0800

merge-o-matic (2013.03.22-0co3) unstable; urgency=low

  * debian/preinst: correct a typo for homedir.
  * debian/dirs: drop /srv/obs/merge-o-matic.

 -- Andrew Lee (李健秋) <andrew.lee@collabora.co.uk>  Fri, 24 May 2013 22:56:16 +0800

merge-o-matic (2013.03.22-0co2) unstable; urgency=low

  * debian/control: depends on apache2 | httpd. (SIN: #16)
  * Package renamed to merge-o-matic. (SIN: #17)

 -- Andrew Lee (李健秋) <andrew.lee@collabora.co.uk>  Tue, 21 May 2013 19:17:24 +0800

merge-o-matic (2013.03.22-0co1) unstable; urgency=low

  * Initial release.

 -- Andrew Lee (李健秋) <andrew.lee@collabora.co.uk>  Tue, 07 May 2013 23:56:30 +0800
